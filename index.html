<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CREATE - –í–∏–¥–µ–æ –•–æ—Å—Ç–∏–Ω–≥</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background: #0f0f0f; color: white; padding: 20px; }
        
        /* Header */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px; }
        .logo { color: #ff0000; font-size: 32px; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 40px; height: 40px; background: #ff0000; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        
        .search-container { flex: 1; max-width: 500px; margin: 0 20px; position: relative; }
        .search-input { width: 100%; padding: 12px 45px 12px 15px; background: #121212; border: 1px solid #333; border-radius: 25px; color: white; font-size: 14px; }
        .search-button { position: absolute; right: 5px; top: 5px; background: #333; border: none; padding: 7px 15px; border-radius: 20px; color: white; cursor: pointer; }
        
        .create-btn { background: #ff0000; color: white; padding: 12px 24px; border: none; border-radius: 25px; cursor: pointer; font-size: 14px; font-weight: bold; }
        
        /* Navigation */
        .nav { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .nav-btn { background: transparent; color: #aaa; border: none; padding: 8px 16px; border-radius: 15px; cursor: pointer; font-size: 14px; }
        .nav-btn.active { background: #333; color: white; }
        
        /* Video Grid */
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .shorts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        
        .video-card { background: #282828; border-radius: 12px; overflow: hidden; transition: transform 0.2s; position: relative; }
        .video-card:hover { transform: scale(1.03); }
        
        .video-thumbnail { width: 100%; height: 200px; object-fit: cover; cursor: pointer; position: relative; }
        .shorts-thumbnail { width: 100%; height: 350px; object-fit: cover; cursor: pointer; position: relative; }
        
        .video-duration { position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.8); padding: 3px 6px; border-radius: 4px; font-size: 12px; }
        .delete-btn { position: absolute; top: 10px; right: 10px; background: rgba(255,0,0,0.8); color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; display: none; }
        .video-card:hover .delete-btn { display: block; }
        
        .video-info { padding: 12px; }
        .video-title { font-size: 16px; margin-bottom: 6px; font-weight: bold; line-height: 1.3; }
        .video-description { color: #aaa; font-size: 13px; line-height: 1.3; margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .video-meta { color: #888; font-size: 12px; display: flex; justify-content: space-between; }
        
        /* Upload Form */
        .upload-form { 
            display: none;
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            background: #282828; padding: 30px; border-radius: 12px; z-index: 1000; 
            width: 90%; max-width: 500px; 
        }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 12px; background: #404040; border: 1px solid #555; border-radius: 6px; color: white; }
        textarea { height: 100px; resize: vertical; }
        .submit-btn { background: #ff0000; color: white; padding: 15px; border: none; border-radius: 6px; cursor: pointer; width: 100%; font-size: 16px; font-weight: bold; }
        .cancel-btn { background: #666; color: white; padding: 15px; border: none; border-radius: 6px; cursor: pointer; width: 100%; margin-top: 10px; }
        
        .overlay { 
            display: none; 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); z-index: 999; 
        }
        
        /* Custom Video Player */
        .custom-player {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            background: #000;
            border-radius: 12px;
            z-index: 2000;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #1a1a1a;
            border-radius: 12px 12px 0 0;
        }
        
        .player-video {
            width: 100%;
            height: 450px;
            background: #000;
        }
        
        .player-controls {
            padding: 15px 20px;
            background: #1a1a1a;
            border-radius: 0 0 12px 12px;
        }
        
        .control-bar {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .progress-container {
            flex: 1;
            height: 4px;
            background: #333;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: #ff0000;
            border-radius: 2px;
            width: 0%;
        }
        
        .time-display {
            font-size: 12px;
            color: #aaa;
            min-width: 100px;
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
        }
        
        .volume-container {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .volume-slider {
            width: 80px;
        }
        
        .loading { text-align: center; color: #888; font-size: 16px; margin: 20px 0; }
        .error { text-align: center; color: #ff4444; font-size: 16px; margin: 20px 0; }
        
        .create-watermark {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255,0,0,0.8);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <div class="logo-icon">C</div>
            CREATE
        </div>
        
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ...">
            <button class="search-button" onclick="searchVideos()">üîç</button>
        </div>
        
        <button class="create-btn" onclick="showUploadForm()">üìπ –°–û–ó–î–ê–¢–¨ –í–ò–î–ï–û</button>
    </div>

    <!-- Navigation -->
    <div class="nav">
        <button class="nav-btn active" onclick="showSection('all')">üé¨ –í—Å–µ –≤–∏–¥–µ–æ</button>
        <button class="nav-btn" onclick="showSection('shorts')">üéØ Shorts</button>
        <button class="nav-btn" onclick="showSection('my')">üë§ –ú–æ–∏ –≤–∏–¥–µ–æ</button>
    </div>

    <!-- Video Sections -->
    <div id="allSection" class="section">
        <div class="video-grid" id="videoGrid">
            <div class="loading">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ...</div>
        </div>
    </div>

    <div id="shortsSection" class="section" style="display: none;">
        <div class="shorts-grid" id="shortsGrid">
            <div class="loading">üéØ –ó–∞–≥—Ä—É–∑–∫–∞ Shorts...</div>
        </div>
    </div>

    <div id="mySection" class="section" style="display: none;">
        <div class="video-grid" id="myVideosGrid">
            <div class="loading">üë§ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞—à–∏—Ö –≤–∏–¥–µ–æ...</div>
        </div>
    </div>

    <!-- Upload Form -->
    <div class="overlay" id="overlay" onclick="hideUploadForm()"></div>
    <div class="upload-form" id="uploadForm">
        <h2 style="text-align: center; margin-bottom: 20px;">üìπ –°–û–ó–î–ê–¢–¨ –í–ò–î–ï–û</h2>
        <form id="uploadFormElement">
            <div class="form-group">
                <label>–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞:</label>
                <select id="contentType">
                    <option value="video">üé¨ –û–±—ã—á–Ω–æ–µ –≤–∏–¥–µ–æ</option>
                    <option value="short">üéØ Shorts</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ:</label>
                <input type="text" id="videoTitle" required>
            </div>
            
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="videoDescription"></textarea>
            </div>
            
            <div class="form-group">
                <label>–í–∏–¥–µ–æ —Ñ–∞–π–ª:</label>
                <input type="file" id="videoFile" accept="video/*" required>
                <div style="margin-top: 10px;">
                    <video id="videoPreview" controls style="max-width: 100%; max-height: 200px; display: none;"></video>
                </div>
            </div>
            
            <button type="submit" class="submit-btn">üöÄ –û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨</button>
            <button type="button" class="cancel-btn" onclick="hideUploadForm()">‚ùå –û–¢–ú–ï–ù–ê</button>
        </form>
    </div>

    <!-- Custom Video Player -->
    <div class="custom-player" id="customPlayer">
        <div class="player-header">
            <div id="playerTitle" style="font-weight: bold;"></div>
            <button class="control-btn" onclick="closePlayer()">‚úï</button>
        </div>
        <video class="player-video" id="playerVideo"></video>
        <div class="player-controls">
            <div class="control-bar">
                <div class="progress-container" onclick="seekVideo(event)">
                    <div class="progress-bar" id="playerProgress"></div>
                </div>
                <div class="time-display" id="playerTime">0:00 / 0:00</div>
            </div>
            <div class="control-buttons">
                <button class="control-btn" onclick="togglePlay()">‚èØÔ∏è</button>
                <button class="control-btn" onclick="skipBackward()">‚è™</button>
                <button class="control-btn" onclick="skipForward()">‚è©</button>
                <div class="volume-container">
                    <button class="control-btn" onclick="toggleMute()">üîä</button>
                    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="1" oninput="setVolume(this.value)">
                </div>
                <button class="control-btn" onclick="toggleFullscreen()">‚õ∂</button>
            </div>
        </div>
    </div>

    <script>
        // üî• –í–ê–®–ò –î–ê–ù–ù–´–ï SUPABASE
        const SUPABASE_URL = 'https://tpcyttxxxtnmfpvnyfmm.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRwY3l0dHh4eHRubWZwdm55Zm1tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5OTgzMDUsImV4cCI6MjA3NzU3NDMwNX0.NQxbRwG68DZL781Zdd3baKiAhw3Q8xyhGgTgC57y39E';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        let allVideos = [];
        let currentVideoId = null;
        let isPlaying = false;
        let currentVolume = 1;
        let isMuted = false;

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –≤–∏–¥–µ–æ
        async function loadVideos() {
            try {
                const { data: videos, error } = await supabase
                    .from('videos')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                allVideos = videos || [];
                displayVideos(allVideos);
                displayShorts(allVideos.filter(v => v.is_short));
                displayMyVideos(allVideos);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ');
            }
        }

        // –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ (–∫–∞–∫ –≤ YouTube)
        function searchVideos() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!query) {
                displayVideos(allVideos);
                return;
            }
            
            const results = allVideos.filter(video => 
                video.title.toLowerCase().includes(query) ||
                (video.description && video.description.toLowerCase().includes(query))
            );
            
            displayVideos(results);
        }

        // –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ
        async function deleteVideo(videoId) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –≤–∏–¥–µ–æ?')) return;
            
            try {
                const { error } = await supabase
                    .from('videos')
                    .delete()
                    .eq('id', videoId);
                
                if (error) throw error;
                
                alert('‚úÖ –í–∏–¥–µ–æ —É–¥–∞–ª–µ–Ω–æ!');
                loadVideos();
            } catch (error) {
                alert('‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ' + error.message);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤–∏–¥–µ–æ
        function displayVideos(videos) {
            const videoGrid = document.getElementById('videoGrid');
            
            if (!videos || videos.length === 0) {
                videoGrid.innerHTML = '<div class="loading">üé¨ –í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            videoGrid.innerHTML = videos.filter(v => !v.is_short).map(video => `
                <div class="video-card">
                    <div onclick="playVideo(${video.id})">
                        <div class="video-thumbnail" style="background: linear-gradient(45deg, #ff0000, #ff6b6b); display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">
                            üé¨ CREATE
                            <div class="create-watermark">CREATE</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="deleteVideo(${video.id})">üóëÔ∏è</button>
                    <div class="video-info">
                        <div class="video-title">${video.title}</div>
                        <div class="video-description">${video.description || '–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è'}</div>
                        <div class="video-meta">
                            <span>üëÅÔ∏è ${video.views || 0}</span>
                            <span>üìÖ ${new Date(video.created_at).toLocaleDateString('ru-RU')}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å Shorts
        function displayShorts(shorts) {
            const shortsGrid = document.getElementById('shortsGrid');
            
            if (!shorts || shorts.length === 0) {
                shortsGrid.innerHTML = '<div class="loading">üéØ Shorts –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            shortsGrid.innerHTML = shorts.map(short => `
                <div class="video-card">
                    <div onclick="playVideo(${short.id})">
                        <div class="shorts-thumbnail" style="background: linear-gradient(45deg, #ff0000, #ff6b6b); display: flex; align-items: center; justify-content: center; color: white; font-size: 16px; font-weight: bold;">
                            üéØ SHORTS
                            <div class="create-watermark">CREATE</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="deleteVideo(${short.id})">üóëÔ∏è</button>
                    <div class="video-info">
                        <div class="video-title">${short.title}</div>
                        <div class="video-meta">
                            <span>üëÅÔ∏è ${short.views || 0}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –º–æ–∏ –≤–∏–¥–µ–æ
        function displayMyVideos(videos) {
            const myGrid = document.getElementById('myVideosGrid');
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ—Ä—É
            myGrid.innerHTML = videos.map(video => `
                <div class="video-card">
                    <div onclick="playVideo(${video.id})">
                        <div class="video-thumbnail" style="background: linear-gradient(45deg, #ff0000, #ff6b6b); display: flex; align-items: center; justify-content: center; color: white; font-size: 14px;">
                            üé¨ CREATE
                            <div class="create-watermark">CREATE</div>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="deleteVideo(${video.id})">üóëÔ∏è</button>
                    <div class="video-info">
                        <div class="video-title">${video.title}</div>
                        <div class="video-meta">
                            <span>üëÅÔ∏è ${video.views || 0}</span>
                            <span>üìÖ ${new Date(video.created_at).toLocaleDateString('ru-RU')}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏—é
        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(section + 'Section').style.display = 'block';
            event.target.classList.add('active');
        }

        // –ö–∞—Å—Ç–æ–º–Ω—ã–π –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä
        function playVideo(videoId) {
            const video = allVideos.find(v => v.id === videoId);
            if (!video) return;
            
            currentVideoId = videoId;
            const player = document.getElementById('playerVideo');
            const playerTitle = document.getElementById('playerTitle');
            
            player.src = video.video_url;
            playerTitle.textContent = video.title;
            document.getElementById('customPlayer').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
            updateViews(videoId);
        }

        function closePlayer() {
            const player = document.getElementById('playerVideo');
            player.pause();
            document.getElementById('customPlayer').style.display = 'none';
            currentVideoId = null;
        }

        function togglePlay() {
            const player = document.getElementById('playerVideo');
            if (player.paused) {
                player.play();
                isPlaying = true;
            } else {
                player.pause();
                isPlaying = false;
            }
        }

        function skipBackward() {
            const player = document.getElementById('playerVideo');
            player.currentTime -= 10;
        }

        function skipForward() {
            const player = document.getElementById('playerVideo');
            player.currentTime += 10;
        }

        function toggleMute() {
            const player = document.getElementById('playerVideo');
            isMuted = !isMuted;
            player.muted = isMuted;
        }

        function setVolume(volume) {
            const player = document.getElementById('playerVideo');
            player.volume = volume;
            currentVolume = volume;
        }

        function seekVideo(event) {
            const player = document.getElementById('playerVideo');
            const progressContainer = event.currentTarget;
            const clickX = event.offsetX;
            const width = progressContainer.offsetWidth;
            const duration = player.duration;
            
            player.currentTime = (clickX / width) * duration;
        }

        function toggleFullscreen() {
            const player = document.getElementById('customPlayer');
            if (!document.fullscreenElement) {
                player.requestFullscreen().catch(err => {
                    console.log('–û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤–∏–¥–µ–æ
        function setupPlayerEvents() {
            const player = document.getElementById('playerVideo');
            const progress = document.getElementById('playerProgress');
            const timeDisplay = document.getElementById('playerTime');
            
            player.addEventListener('timeupdate', () => {
                const percent = (player.currentTime / player.duration) * 100;
                progress.style.width = percent + '%';
                
                const currentTime = formatTime(player.currentTime);
                const duration = formatTime(player.duration);
                timeDisplay.textContent = `${currentTime} / ${duration}`;
            });
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        async function updateViews(videoId) {
            try {
                const video = allVideos.find(v => v.id === videoId);
                if (video) {
                    video.views = (video.views || 0) + 1;
                    
                    const { error } = await supabase
                        .from('videos')
                        .update({ views: video.views })
                        .eq('id', videoId);
                    
                    if (error) throw error;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
        document.getElementById('uploadFormElement').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const title = document.getElementById('videoTitle').value;
            const description = document.getElementById('videoDescription').value;
            const videoFile = document.getElementById('videoFile').files[0];
            const contentType = document.getElementById('contentType').value;
            
            if (!videoFile) {
                alert('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª!');
                return;
            }
            
            try {
                const submitBtn = document.querySelector('.submit-btn');
                submitBtn.disabled = true;
                submitBtn.textContent = 'üì§ –ó–∞–≥—Ä—É–∑–∫–∞...';
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∏–¥–µ–æ
                const videoFileName = `video-${Date.now()}-${videoFile.name}`;
                const { data: videoData, error: videoError } = await supabase.storage
                    .from('videos')
                    .upload(videoFileName, videoFile);
                
                if (videoError) throw videoError;
                
                // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É
                const { data: videoUrlData } = supabase.storage
                    .from('videos')
                    .getPublicUrl(videoFileName);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É
                const { data, error } = await supabase
                    .from('videos')
                    .insert([{
                        title: title,
                        description: description,
                        video_url: videoUrlData.publicUrl,
                        is_short: contentType === 'short',
                        views: 0
                    }]);
                
                if (error) throw error;
                
                alert('‚úÖ –í–∏–¥–µ–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ!');
                hideUploadForm();
                loadVideos();
                
            } catch (error) {
                alert('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
            } finally {
                const submitBtn = document.querySelector('.submit-btn');
                submitBtn.disabled = false;
                submitBtn.textContent = 'üöÄ –û–ü–£–ë–õ–ò–ö–û–í–ê–¢–¨';
            }
        });

        // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Ñ–æ—Ä–º –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏...
        function showUploadForm() {
            document.getElementById('uploadForm').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }
        
        function hideUploadForm() {
            document.getElementById('uploadForm').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('uploadFormElement').reset();
            document.getElementById('videoPreview').style.display = 'none';
        }
        
        document.getElementById('videoFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const videoPreview = document.getElementById('videoPreview');
                videoPreview.src = URL.createObjectURL(file);
                videoPreview.style.display = 'block';
            }
        });
        
        // –ü–æ–∏—Å–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') searchVideos();
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadVideos();
            setupPlayerEvents();
        });

        function showError(message) {
            const videoGrid = document.getElementById('videoGrid');
            videoGrid.innerHTML = `<div class="error">‚ùå ${message}</div>`;
        }
    </script>
</body>
</html>
